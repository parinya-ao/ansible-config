---
# SPDX-License-Identifier: MIT-0
# Node.js installation via the NodeSource rpm stream

- name: Configure NodeSource repository for Node.js {{ developer_node_version }}
  ansible.builtin.shell:
    cmd: "curl -fsSL {{ developer_nodesource_setup_url }}/setup_{{ developer_node_version }}.x | bash -"
    executable: /bin/bash
    creates: "/etc/yum.repos.d/nodesource-nodejs-{{ developer_node_version }}.repo"
  tags:
    - nodejs
    - javascript

- name: Install Node.js
  ansible.builtin.dnf:
    name: nodejs
    state: present
  tags:
    - nodejs
    - javascript

- name: Verify Node.js installation
  ansible.builtin.command:
    cmd: node -v
  register: node_version
  changed_when: false
  tags:
    - nodejs
    - javascript

- name: Display Node.js version
  ansible.builtin.debug:
    msg: "Node.js {{ node_version.stdout }} installed"
  when: node_version.stdout is defined
  tags:
    - nodejs
    - javascript
