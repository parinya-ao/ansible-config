// on file ~/.config/zed/settings.json

// Zed settings
//
// For information on how to configure Zed, see the Zed
// documentation: https://zed.dev/docs/configuring-zed
//
// To see all of Zed's default settings without changing your
// custom settings, run `zed: open default settings` from the
// command palette (cmd-shift-p / ctrl-shift-p)
{
    "ui_font_family": "Inter",
    "buffer_font_family": "Intel One Mono",
    "ui_font_size": 16,
    "buffer_font_size": 15,
    "theme": {
        "mode": "system",
        "light": "One Light",
        "dark": "One Dark"
    },
    "vim_mode": true,

    "use_on_type_format": true,
    "ensure_final_newline_on_save": true,
    "remove_trailing_whitespace_on_save": true,
    "format_on_save": "on",
    "autosave": "on_focus_change",
    "auto_signature_help": true,
    "show_completions_on_input": true,

    "languages": {
        "Python": {
            "language_servers": ["pyright", "ruff"],
            "formatter": "language_server",
            "format_on_save": "on"
        },
        "TypeScript": {
            "language_servers": ["vtsls", "eslint"],
            "formatter": "language_server"
        },
        "YAML": {
            "language_servers": ["yaml-language-server"],
            "tab_size": 2
        },
        "Ansible": {
            "language_servers": ["ansible-language-server"]
        },
        "TOML": {
            "language_servers": ["taplo"]
        }
    },

    "lsp": {
        "pyright": {
            "settings": {
                "python": {
                    "analysis": {
                        "typeCheckingMode": "strict",
                        "autoSearchPaths": true,
                        "useLibraryCodeForTypes": true,
                        "diagnosticMode": "workspace"
                    }
                }
            }
        },
        "ruff": {
            "initialization_options": {
                "settings": {
                    "args": ["--select=E,F,I,UP", "--fix"]
                }
            }
        },
        "vtsls": {
            "settings": {
                "typescript": {
                    "updateImportsOnFileMove": { "enabled": "always" },
                    "inlayHints": {
                        "parameterNames": {
                            "enabled": "all",
                            "suppressWhenArgumentMatchesName": true
                        },
                        "parameterTypes": { "enabled": true },
                        "variableTypes": { "enabled": true },
                        "propertyDeclarationTypes": { "enabled": true },
                        "functionLikeReturnTypes": { "enabled": true },
                        "enumMemberValues": { "enabled": true }
                    }
                },
                "javascript": {
                    "updateImportsOnFileMove": { "enabled": "always" }
                }
            }
        },
        "yaml-language-server": {
            "settings": {
                "yaml": {
                    "schemaStore": {
                        "enable": true,
                        "url": "https://www.schemastore.org/api/json/catalog.json"
                    },
                    "format": { "enable": true, "singleQuote": true },
                    "validate": true,
                    "hover": true
                }
            }
        },
        "ansible-language-server": {
            "settings": {
                "ansible": {
                    "validation": {
                        "lint": { "enabled": true, "path": "ansible-lint" }
                    }
                }
            }
        },
        "discord_presence": {
            "initialization_options": {
                "application_id": "1263505205522337886",
                "base_icons_url": "https://raw.githubusercontent.com/xhyrom/zed-discord-presence/main/assets/icons/",
                "state": "Working on {filename}",
                "details": "In {workspace}",
                "large_image": "{base_icons_url}/{language:lo}.png",
                "large_text": "{language:u}",
                "small_image": "{base_icons_url}/zed.png",
                "small_text": "Zed",
                "git_integration": true,
                "idle": {
                    "timeout": 300,
                    "action": "change_activity",
                    "state": "Idling"
                }
            }
        }
    },

    "agent": {
        "default_profile": "agent",
        "profiles": {
            "agent": {
                "default_model": {
                    "provider": "copilot_chat",
                    "model": "claude-haiku-4.5",
                    "enable_thinking": false
                },
                "name": "agent",
                "tools": {
                    "copy_path": true,
                    "create_directory": true,
                    "delete_path": true,
                    "diagnostics": true,
                    "edit_file": true,
                    "fetch": true,
                    "find_path": true,
                    "grep": true,
                    "list_directory": true,
                    "move_path": true,
                    "now": true,
                    "open": true,
                    "read_file": true,
                    "restore_file_from_disk": true,
                    "save_file": true,
                    "terminal": true
                },
                "enable_all_context_servers": false,
                "context_servers": {
                    "mcp-server-context7": {
                        "tools": {
                            "query-docs": true,
                            "resolve-library-id": true
                        }
                    },
                    "mcp-server-sequential-thinking": {
                        "tools": {
                            "sequentialthinking": true
                        }
                    }
                }
            }
        },
        "default_model": {
            "provider": "copilot_chat",
            "model": "gpt-4o"
        }
    },

    "language_models": {
        "openai_compatible": {
            "GLM": {
                "api_url": "https://api.z.ai/api/coding/paas/v4",
                "available_models": [
                    {
                        "name": "GLM-4.7",
                        "max_tokens": 200000,
                        "max_output_tokens": 32000,
                        "max_completion_tokens": 200000,
                        "capabilities": {
                            "tools": true,
                            "images": false,
                            "parallel_tool_calls": false,
                            "prompt_cache_key": false,
                            "chat_completions": true
                        }
                    }
                ]
            }
        }
    },

    "context_servers": {
        "mcp-server-context7": {
            "enabled": true,
            "remote": false,
            "settings": {}
        }
    },

    "agent_servers": {
        "github-copilot": {
            "type": "registry"
        },
        "Kimi Code CLI": {
            "type": "custom",
            "command": "kimi",
            "args": ["acp"],
            "env": {}
        }
    }
}
